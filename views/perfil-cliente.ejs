<%- include('partials/header') %>

<body>
    <!-- PAGINA COMPLETA -->
    <div class="page">
        <%- include('partials/navbar') %>

        <!-- CONTEÚDO PRINCIPAL -->
        <div id="meio-home" class="container">
            <div class="row ">

                <!-- CONTAINER CAMINHO DAS PAGINAS -->
                <%- include('partials/breadcrumb') %>
                <div id="content" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

                    <div id="painel-cliente" class="container center">
                        <!--DADOS -->
                        <!-- <div class="card painel-dash border-left-primary shadow ml-5 mr-5"> -->
                        <div class="card card-body ml-5 mr-5" id="borda">

                            <form action="/usuarios/perfil-cliente" method="POST">
                                <div class="row">
                                    <div class='col-4'>
                                        <h4>Dados Pessoais</h4>
                                    </div>

                                    <% if (usuario.id === usuarioPerfil.id) { %>
                                    <div class='col-8 text-right'>
                                        <a href="/usuarios/editar-cliente/<%= usuarioPerfil.id %>" class="btn btn-alt"
                                            id="dados">Alterar Dados</a>
                                    </div>
                                    <% } %>
                                </div>
                            </form>

                            <!-- Dados Pessoais -->
                            <div class="card card-body border ml-2 mr-2">
                                <div class="row">
                                    <div class='col-8'>
                                        <!-- NOME COMPLETO-->
                                        <div class="form-group row">
                                            <label for="inputNome" class="col-sm-3 col-form-label">Nome Completo</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputNome" name="nomeCli"
                                                    value="<%= usuarioPerfil.nome + ' ' + usuarioPerfil.sobrenome %> "
                                                    readonly>
                                            </div>
                                        </div>
                                        <!-- DATA NASCIMENTO -->
                                        <div class="form-group row">
                                            <label for="inputData" class="col-sm-3 col-form-label">Data de
                                                Nascimento</label>
                                            <div class="col-sm-5">
                                                <input type="date" class="form-control" id="inputData" name="dataCli"
                                                    value="<%= usuarioPerfil.data_nasc %>" readonly>
                                            </div>
                                        </div>
                                        <!-- CPF-->
                                        <div class="form-group row">
                                            <label for="inputCPf" class="col-sm-3 col-form-label">CPF</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputCPF" name="cpfCli"
                                                    value="<%= usuarioPerfil.cpf %>" readonly>
                                            </div>
                                        </div>
                                        <!-- Celular-->
                                        <div class="form-group row">
                                            <label for="inputCel" class="col-sm-3 col-form-label">Celular</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputCel" name="celular"
                                                    value="<%= usuarioPerfil.celular %>" readonly>
                                            </div>
                                        </div>
                                        <!-- EMAIL -->
                                        <div class="form-group row">
                                            <label for="inputEmail" class="col-sm-3 col-form-label">Email</label>
                                            <div class="col-sm-9">
                                                <input type="email" class="form-control" id="inputEmail" name="emailCli"
                                                    placeholder="<%= usuarioPerfil.email %>" readonly>
                                            </div>
                                        </div>
                                        <!-- SEXO -->
                                        <div class="form-group row">
                                            <% var sexo; %>
                                            <% if (usuarioPerfil.sexo) { %>
                                            <% usuarioPerfil.sexo == 'M' ? sexo = 'Masculino' : sexo = 'Feminino' %>
                                            <% } else { %>
                                            <% sexo = 'Sexo ainda não informado'; %>
                                            <% } %>
                                            <label for="inputSexo" class="col-sm-3 col-form-label">Sexo</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSexo" name="sexoCli"
                                                    placeholder="<%= sexo %>" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4 text-center">
                                        <img id='avatar' class='shadow border-bottom-primary rounded-circle'
                                            src='<%= usuarioPerfil.imagem %>' width="150px" height="150px" alt='avatar'>
                                    </div>
                                </div>
                            </div>

                            <% if (endereco) { %>
                            <!--Endereço -->
                            <div class="card card-body border mt-2 ml-2 mr-2">
                                <div class="row">
                                    <div class='col-4'>
                                        <h5>Endereço:</h5>
                                    </div>
                                </div>
                                <!-- Divider -->
                                <hr class="sidebar-divider my-0">

                                <div class="painel-dados row">
                                    <div class='col-12'>
                                        <div class="row text-left">
                                            <div class="row col-12">
                                                <!-- Endereço -->
                                                <div class='col-11'>
                                                    <!-- CEP-->
                                                    <div class="form-group row">
                                                        <label for="inputRua"
                                                            class="col-sm-2 col-form-label">CEP</label>
                                                        <div class="col-sm-5">
                                                            <input type="text" class="form-control" id="inputCep"
                                                                value="<%= endereco.cep%>" readonly>
                                                        </div>

                                                    </div>
                                                    <!-- RUA -->
                                                    <div class="form-group row">
                                                        <label for="inputRua"
                                                            class="col-sm-2 col-form-label">Rua</label>
                                                        <div class="col-sm-5">
                                                            <input type="text" class="form-control" id="inputRua"
                                                                value="<%= endereco.logradouro%>" readonly>
                                                        </div>
                                                        <label for="inputNum" class="col-sm-1 col-form-label">Nº</label>
                                                        <div class="col-sm-2">
                                                            <input type="text" class="form-control" id="inputNum"
                                                                value="<%= endereco.numeral%>" readonly>
                                                        </div>
                                                    </div>
                                                    <!-- COMPLEMENTO -->
                                                    <div class="form-group row">
                                                        <label for="inputComplemento"
                                                            class="col-sm-2 col-form-label">Complemento</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control"
                                                                id="inputComplemento" value="<%= endereco.complemento%>"
                                                                readonly>
                                                        </div>
                                                    </div>
                                                    <!-- CIDADE -->
                                                    <div class="form-group row">
                                                        <label for="inputCidade"
                                                            class="col-sm-2 col-form-label">Cidade</label>
                                                        <div class="col-sm-5">
                                                            <input type="text" class="form-control" id="inputCidade"
                                                                value="<%= endereco.cidade%>" readonly>
                                                        </div>
                                                    </div>
                                                    <!-- ESTADO -->
                                                    <div class="form-group row">
                                                        <label for="inputEstado"
                                                            class="col-sm-2 col-form-label">Estado</label>
                                                        <div class="col-sm-5">
                                                            <select id="inputEstado" class="form-control" name="estado"
                                                                disabled>
                                                                <option
                                                                    <%= (endereco.estado == null)? 'selected' : '' %>>
                                                                    Escolher...</option>
                                                                <option value="1"
                                                                    <%= (endereco.estado == 'SP')? 'selected' : '' %>>SP
                                                                </option>
                                                                <option value="2"
                                                                    <%= (endereco.estado == 'RJ')? 'selected' : '' %>>RJ
                                                                </option>
                                                                <option value="3"
                                                                    <%= (endereco.estado == 'MG')? 'selected' : '' %>>MG
                                                                </option>
                                                                <option value="4"
                                                                    <%= (endereco.estado == 'RS')? 'selected' : '' %>>RS
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                </div>
                                                <!-- FIM endereço -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% } %>

                            <% if (usuario.id === usuarioPerfil.id) { %>
                            <div class="row mt-2">
                                <% if(!loja){ %>
                                <div class='col-10 text-right'>
                                    <a href="/lojas/cadastrar-loja" class="btn btn-alt" id="dados">Tornar-me
                                        Vendedor</a>
                                </div>
                                <div class='col-2 text-right'>
                                    <a id="deletar-usuario" href="/usuarios/deletar/<%= usuario.id %>?_method=DELETE"
                                        class="btn btn-alt" id="dados">Excluir Conta</a>
                                </div>
                                <% } else { %>
                                <div class='col-12 text-right'>
                                    <a id="deletar-usuario" href="/usuarios/deletar/<%= usuario.id %>?_method=DELETE"
                                        class="btn btn-alt" id="dados">Excluir Conta</a>
                                </div>
                                <% } %>
                            </div>
                            <% } %>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <% include partials/footer-alt %>
    </div>
    <% include partials/script %>
    <script>
        const botaoDeletar = document.getElementById("deletar-usuario");
        botaoDeletar.addEventListener("click", (ev) => {
            if (!confirm("Tem certeza que deseja excluir a sua conta?")) {
                ev.preventDefault;
            }
        })
    </script>

</body>

</html>